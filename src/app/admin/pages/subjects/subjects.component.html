<body [ngClass]="darkTheme() ? 'dark-theme flex-center-center-column' : 'flex-center-center-column' ">
    <section class="container flex-center-center-column">
        <h2 class="tittle mb-24"> Reticulas </h2>

        <span class="small mb-24">
            Información de reticulas de la carrera de {{career}}.
            Solo las materias listadas en cada reticula estarán disponibles para 
            que los docentes registren nuevos grupos. 
            Es crucial asegurarse de incluir todas las materias del 
            plan de estudios.
        </span>

        <nav class="mb-24">
            <select
                class="select-filter"
                [(ngModel)]="selectedSubjectId"
                (ngModelChange)="getSubjects(selectedSubjectId)"
                >

                @for (subject of subjectKeys; track subject._id) {
                    <option [value]="subject._id">
                    {{ subject.claveReticula }}
                    </option>
                }
            </select>


            <button class="btn-primary-icon flex-center-center-row" (click)="uploadSubjects()"> 
                <svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"></path>
                    <path d="m7 9 5-5 5 5"></path>
                    <path d="M12 4v12"></path>
                </svg>
                <p class="small"> Subir reticula </p>
            </button>

            <button class="btn-primary-icon flex-center-center-row" (click)="deleteSubject(selectedSubjectId)"> 
                <svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 7h16"></path>
                    <path d="M10 11v6"></path>
                    <path d="M14 11v6"></path>
                    <path d="m5 7 1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path>
                    <path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path>
                </svg>
                <p class="small"> Eliminar reticula </p>
            </button>
        </nav>

        @defer(on timer(3s)){
            @if(subjects){
                <article>
                    <div>
                        <span class="small">Semestre 1</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 1){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 2</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 2){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 3</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 3){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 4</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 4){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 5</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 5){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 6</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 6){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 7</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 7){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 8</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 8){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                    <div>
                        <span class="small">Semestre 9</span>
                        @for (subject of subjects; track $index){
                            @if(subject?.semestreMateria === 9){
                                <app-subject-card [clave]="subject?.claveMateria || ''" [materia]="subject?.nombreMateria || ''"/>
                            }
                        }
                    </div>
                </article> 
            }@else{
                <div class="flex-center-center-column empty">
                    <span class="text"> Por el momento, aún no hay reticulas registradas en el sistema. </span>
                </div>
            }
        }@placeholder{
            <div class="flex-center-center-column loader">
                <span class="spinner mb-24"></span>
                <span class="medium">Cargando información</span>
            </div>
        }
    </section>
</body>